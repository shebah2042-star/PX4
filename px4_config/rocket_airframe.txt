# PX4 Rocket Airframe Configuration
# تكوين هيكل الصاروخ لـ PX4
#
# This file should be placed in PX4-Autopilot/ROMFS/px4fmu_common/init.d-posix/airframes/
# or configured via QGroundControl
#
# Airframe: Custom Rocket with Fin Control
# Maintainer: Rocket Control System Team

# @name Custom Rocket
# @type Rocket
# @class Rocket
#
# @maintainer Rocket Control System Team
#
# @board px4_fmu-v2 exclude
# @board px4_fmu-v3 exclude
# @board px4_fmu-v4 exclude
# @board px4_fmu-v5 exclude
# @board px4_fmu-v6c exclude
# @board px4_fmu-v6x exclude

# System Configuration
param set-default SYS_AUTOSTART 50000
param set-default SYS_AUTOCONFIG 1

# Vehicle Type - Custom
param set-default MAV_TYPE 0

# Control Allocation
param set-default CA_AIRFRAME 0
param set-default CA_METHOD 0

# Servo Configuration for Fins
# Fin 1 (Front) - Channel 1
param set-default PWM_MAIN_FUNC1 201
param set-default PWM_MAIN_MIN1 1000
param set-default PWM_MAIN_MAX1 2000
param set-default PWM_MAIN_TRIM1 1500
param set-default PWM_MAIN_REV1 0

# Fin 2 (Right) - Channel 2
param set-default PWM_MAIN_FUNC2 202
param set-default PWM_MAIN_MIN2 1000
param set-default PWM_MAIN_MAX2 2000
param set-default PWM_MAIN_TRIM2 1500
param set-default PWM_MAIN_REV2 0

# Fin 3 (Back) - Channel 3
param set-default PWM_MAIN_FUNC3 203
param set-default PWM_MAIN_MIN3 1000
param set-default PWM_MAIN_MAX3 2000
param set-default PWM_MAIN_TRIM3 1500
param set-default PWM_MAIN_REV3 0

# Fin 4 (Left) - Channel 4
param set-default PWM_MAIN_FUNC4 204
param set-default PWM_MAIN_MIN4 1000
param set-default PWM_MAIN_MAX4 2000
param set-default PWM_MAIN_TRIM4 1500
param set-default PWM_MAIN_REV4 0

# Parachute Drogue - Channel 5
param set-default PWM_MAIN_FUNC5 205
param set-default PWM_MAIN_MIN5 1000
param set-default PWM_MAIN_MAX5 2000
param set-default PWM_MAIN_DIS5 1000

# Parachute Main - Channel 6
param set-default PWM_MAIN_FUNC6 206
param set-default PWM_MAIN_MIN6 1000
param set-default PWM_MAIN_MAX6 2000
param set-default PWM_MAIN_DIS6 1000

# Disable unused channels
param set-default PWM_MAIN_FUNC7 0
param set-default PWM_MAIN_FUNC8 0

# Attitude Control Parameters
param set-default MC_ROLL_P 6.5
param set-default MC_ROLLRATE_P 0.15
param set-default MC_ROLLRATE_I 0.2
param set-default MC_ROLLRATE_D 0.003
param set-default MC_ROLLRATE_MAX 220.0

param set-default MC_PITCH_P 6.5
param set-default MC_PITCHRATE_P 0.15
param set-default MC_PITCHRATE_I 0.2
param set-default MC_PITCHRATE_D 0.003
param set-default MC_PITCHRATE_MAX 220.0

param set-default MC_YAW_P 2.8
param set-default MC_YAWRATE_P 0.2
param set-default MC_YAWRATE_I 0.1
param set-default MC_YAWRATE_D 0.0
param set-default MC_YAWRATE_MAX 200.0

# Sensor Configuration
param set-default SENS_BOARD_ROT 0
param set-default SENS_BOARD_X_OFF 0.0
param set-default SENS_BOARD_Y_OFF 0.0
param set-default SENS_BOARD_Z_OFF 0.0

# EKF2 Configuration
param set-default EKF2_AID_MASK 1
param set-default EKF2_HGT_MODE 0
param set-default EKF2_BARO_NOISE 2.0
param set-default EKF2_BARO_GATE 5.0

# MAVLink Configuration
param set-default MAV_0_CONFIG 101
param set-default MAV_0_MODE 2
param set-default MAV_0_RATE 100000
param set-default MAV_0_FORWARD 1

param set-default MAV_1_CONFIG 102
param set-default MAV_1_MODE 2
param set-default MAV_1_RATE 80000

# Commander Configuration
param set-default COM_ARM_WO_GPS 1
param set-default COM_DISARM_LAND 0
param set-default COM_RC_IN_MODE 1

# Safety Configuration
param set-default CBRK_SUPPLY_CHK 894281
param set-default CBRK_USB_CHK 197848
param set-default CBRK_AIRSPD_CHK 162128
param set-default CBRK_ENGINEFAIL 284953
param set-default CBRK_FLIGHTTERM 121212

# Offboard Mode Configuration
param set-default COM_OF_LOSS_T 1.0
param set-default COM_OBL_ACT 0
param set-default COM_OBL_RC_ACT 0

# Battery Configuration
param set-default BAT_N_CELLS 4
param set-default BAT_V_EMPTY 3.4
param set-default BAT_V_CHARGED 4.2
param set-default BAT_CAPACITY 5000

# Logging
param set-default SDLOG_MODE 0
param set-default SDLOG_PROFILE 3
